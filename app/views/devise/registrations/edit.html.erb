
<div class= 'edit-page'>

<!-- NAVBAR LEFT-->
    <div class = 'edit-left'>
      <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
        <li class="nav-item">
          <a class="nav-link active" id="pills-home-tab" data-toggle="pill" href="#pills-home" role="tab" aria-controls="pills-home" aria-selected="false"><%= image_tag ('avatar.png')%></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" id="pills-profile-tab" data-toggle="pill" href="#pills-profile" role="tab" aria-controls="pills-profile" aria-selected="true"><%= image_tag ('edit.png')%></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" id="pills-contact-tab" data-toggle="pill" href="#pills-contact" role="tab" aria-controls="pills-contact" aria-selected="false"><%= image_tag ('rubbish-bin.png')%></a>
        </li>
      </ul>

    </div>


 <div class = 'edit-right'>
    <div class="tab-content" id="pills-tabContent">

<!-- PROFILE PAGE -->
      <div class="tab-pane fade  show active" id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab">
        <div class= "profile-tab">
          <div class= "show-box">
            <h2>Recently <br>liked</h2>
            <div class= "show-box-inside">
              <% if current_user.likes.all == nil then %>
                You haven't liked anything yet!
              <% end %>
              <% array = []%>
              <% current_user.likes.all.reverse.each_with_index do |like, i|%>
              <% array << like %>
              <%= i+1%>. <%= link_to (like.artist.name), artist_path(like.artist.id) %><br>
              <% if i==4 then break %>
              <% end %><% end %>


            </div>
          </div>

          <div class= "show-box">
            <h2>Artists <br>for you</h2>
            <div class= "show-box-inside">
              <% RSpotify::authenticate("2fc8c7db0a584ecc97c8789e10b1ba14", "3e31ba14f979474ab69880fafd410829") %>
              <% array.each_with_index do |like, i| %>
              <% if RSpotify::Artist.find(like.artist.spotify_id).related_artists.first != nil %>
              <%= i+1 %>. <%=  link_to (RSpotify::Artist.find(like.artist.spotify_id).related_artists.first.name), artist_path(Artist.find_by(name: RSpotify::Artist.find(like.artist.spotify_id).related_artists.first.name).id) %> <br>
              <% end %><% end %>
              <% array = []%>

            </div>
          </div>
        </div>

      </div>


<!-- EDIT ACCOUNT -->
      <div class="tab-pane fade" id="pills-profile" role="tabpanel" aria-labelledby="pills-profile-tab">
        <div class='similar-artist'>
          <h2>Edit my info</h2>

            <%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put }) do |f| %>
              <%= devise_error_messages! %>

              <div class="input-group">

              <div class="input-group-prepend">
                <div class="input-group-text">✉️</div>
             </div>
                <%= f.email_field :email, autofocus: true, autocomplete: "email" %>
              </div>

              <% if devise_mapping.confirmable? && resource.pending_reconfirmation? %>
                <div>Currently waiting confirmation for: <%= resource.unconfirmed_email %></div>
              <% end %>

              <div class="input-group">

              <div class="input-group-prepend">
                <div class="input-group-text">🔑</div>
             </div>
                <%= f.password_field :password, autocomplete: "new-password", placeholder: "new password" %>
              </div>

              <div class="input-group">

              <div class="input-group-prepend">
                <div class="input-group-text">🔑</div>
             </div>
                <%= f.password_field :password_confirmation, autocomplete: "new-password", placeholder: "new password, again" %>
              </div>

              <div class="input-group">

              <div class="input-group-prepend">
                <div class="input-group-text">🔐</div>
             </div>
                <%= f.password_field :current_password, autocomplete: "current-password", placeholder: "current password" %>
              </div>

             <div class="form-group">
              <div class="actions">
                <%= f.submit "Update", class:"submit"%>
              </div></div>
            <% end %>
          </div>
          </div>



<!-- DELETE ACOUNT -->
      <div class="tab-pane fade" id="pills-contact" role="tabpanel" aria-labelledby="pills-contact-tab">
        <div class='genres-artist'>
          <h2>Cancel my account</h2>
          <p>Unhappy? <%= button_to "Cancel my account", registration_path(resource_name), data: { confirm: "Are you sure?" }, method: :delete, class:'submit' %></p>
        </div>
      </div>

  </div>
  </div>
</div>
